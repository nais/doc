---
tags: [postgres, reference]
---

<style>
/* Make the ... appear in front of the spec items in the right hand nav menu  */
.md-sidebar--secondary span.md-ellipsis {
	direction: rtl;
}
</style>

# Nais Postgres reference

<!--
  This documentation was automatically generated by https://github.com/nais/pgrator/actions
  
  DO NOT MAKE MANUAL CHANGES TO THIS FILE, THEY WILL BE OVERWRITTEN!
-->

!!! warning "Experimental feature"
    This feature is an alpha feature, and is subject to API change, instability or removal.
    See the [main Postgres page](../README.md) for more information.

This document describes all possible configuration values in the `Postgres` spec, commonly known as the `postgres.yaml` file.

## cluster
Cluster configures the Postgres cluster

Type: `object`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      cluster:
        allowDeletion: true
        audit:
          enabled: true
          statementClasses:
            - function
            - misc
        highAvailability: true
        majorVersion: "17"
        resources:
          cpu: 200m
          diskSize: 2Gi
          memory: 2Gi
    ```

### cluster.allowDeletion
Allow deletion of the Postgres cluster when the application is deleted.

Type: `boolean`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      cluster:
        allowDeletion: true
    ```

### cluster.audit
Configure audit logging for the Postgres cluster.

Type: `object`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      cluster:
        audit:
          enabled: true
          statementClasses:
            - function
            - misc
    ```

#### cluster.audit.enabled
Enable audit logging for the Postgres cluster.

Type: `boolean`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      cluster:
        audit:
          enabled: true
    ```

#### cluster.audit.statementClasses
Statement classes to log.

Type: `array`<br />
Required: `false`<br />
Default value: `ddl,write`<br />

??? example
    ``` yaml
    spec:
      cluster:
        audit:
          statementClasses:
            - function
            - misc
    ```

### cluster.highAvailability
High availability cluster.

Type: `boolean`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      cluster:
        highAvailability: true
    ```

### cluster.majorVersion
Major version of Postgres to use.

Type: `enum`<br />
Required: `true`<br />
Allowed values: `16`, `17`<br />

??? example
    ``` yaml
    spec:
      cluster:
        majorVersion: "17"
    ```

### cluster.resources
Type: `object`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      cluster:
        resources:
          cpu: 200m
          diskSize: 2Gi
          memory: 2Gi
    ```

#### cluster.resources.cpu
CPU resources for the Postgres cluster.

Type: `object`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      cluster:
        resources:
          cpu: 200m
    ```

#### cluster.resources.diskSize
Disk size for the Postgres cluster.

Type: `object`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      cluster:
        resources:
          diskSize: 2Gi
    ```

#### cluster.resources.memory
Memory resources for the Postgres cluster.

Type: `object`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      cluster:
        resources:
          memory: 2Gi
    ```

## database
Database configures the Postgres database.

Type: `object`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      database:
        collation: nb_NO
        extensions:
          - name: postgis
    ```

### database.collation
Collation for the Postgres database.

Type: `enum`<br />
Required: `false`<br />
Allowed values: `en_US`, `nb_NO`<br />

??? example
    ``` yaml
    spec:
      database:
        collation: nb_NO
    ```

### database.extensions
Extensions to enable in the Postgres database.

Type: `array`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      database:
        extensions:
          - name: postgis
    ```

#### database.extensions[].name
Name of the Postgres extension to enable.

Type: `string`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      database:
        extensions:
          - name: postgis
    ```

## maintenanceWindow
MaintenanceWindow configures the maintenance window for the Postgres cluster.

Type: `object`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      maintenanceWindow:
        day: 4
        hour: 10
    ```

### maintenanceWindow.day
Type: `integer`<br />
Required: `true`<br />
Value range: `1`-`7`<br />

??? example
    ``` yaml
    spec:
      maintenanceWindow:
        day: 4
    ```

### maintenanceWindow.hour
Type: `integer`<br />
Required: `true`<br />
Value range: `0`-`23`<br />

??? example
    ``` yaml
    spec:
      maintenanceWindow:
        hour: 10
    ```

