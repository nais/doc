# NAIS Topic reference

<!--
  This documentation was automatically generated by the liberator pipeline.
  See https://github.com/nais/liberator/actions for details.
  
  DO NOT MAKE MANUAL CHANGES TO THIS FILE, THEY WILL BE OVERWRITTEN!
-->

This document describes all possible configuration values in the `Topic` spec, commonly known as the `topic.yaml` file.

## acl
Type: `array`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      acl:
        - access: read
          application: consumer
          team: otherteam
        - access: write
          application: producer
          team: myteam
        - access: readwrite
          application: processor
          team: myteam
    ```

### acl[].access
Access type granted for a application. Defaults to `readwrite`.

Type: `enum`<br />
Required: `true`<br />
Allowed values: `read`, `readwrite`, `write`<br />

??? example
    ``` yaml
    spec:
      acl:
        - access: read
          application: consumer
          team: otherteam
        - access: write
          application: producer
          team: myteam
        - access: readwrite
          application: processor
          team: myteam
    ```

### acl[].application
The name of the specified application

Type: `string`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      acl:
        - access: read
          application: consumer
          team: otherteam
        - access: write
          application: producer
          team: myteam
        - access: readwrite
          application: processor
          team: myteam
    ```

### acl[].team
The team of the specified application

Type: `string`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      acl:
        - access: read
          application: consumer
          team: otherteam
        - access: write
          application: producer
          team: myteam
        - access: readwrite
          application: processor
          team: myteam
    ```

## config
Type: `object`<br />
Required: `false`<br />

??? example
    ``` yaml
    spec:
      config:
        cleanupPolicy: delete
        maxMessageBytes: 1.048588e+06
        minimumInSyncReplicas: 2
        partitions: 1
        replication: 3
        retentionBytes: -1
        retentionHours: 168
        segmentHours: 168
    ```

### config.cleanupPolicy
CleanupPolicy is either "delete" or "compact" or both. This designates the retention policy to use on old log segments.

Type: `enum`<br />
Required: `false`<br />
Default value: `delete`<br />
Allowed values: `compact`, `compact,delete`, `delete`<br />

??? example
    ``` yaml
    spec:
      config:
        cleanupPolicy: delete
    ```

### config.maxMessageBytes
The largest record batch size allowed by Kafka (after compression if compression is enabled). If this is increased and there are consumers older than 0.10.2, the consumers' fetch size must also be increased so that they can fetch record batches this large. In the latest message format version, records are always grouped into batches for efficiency. In previous message format versions, uncompressed records are not grouped into batches and this limit only applies to a single record in that case.

Type: `integer`<br />
Required: `false`<br />
Default value: `1048588`<br />
Value range: `1`-`5242880`<br />

??? example
    ``` yaml
    spec:
      config:
        maxMessageBytes: 1.048588e+06
    ```

### config.minimumInSyncReplicas
When a producer sets acks to "all" (or "-1"), `min.insync.replicas` specifies the minimum number of replicas that must acknowledge a write for the write to be considered successful.

Type: `integer`<br />
Required: `false`<br />
Default value: `2`<br />
Value range: `1`-`7`<br />

??? example
    ``` yaml
    spec:
      config:
        minimumInSyncReplicas: 2
    ```

### config.partitions
The default number of log partitions per topic.

Type: `integer`<br />
Required: `false`<br />
Default value: `1`<br />
Value range: `1`-`1000000`<br />

??? example
    ``` yaml
    spec:
      config:
        partitions: 1
    ```

### config.replication
The default replication factor for created topics.

Type: `integer`<br />
Required: `false`<br />
Default value: `3`<br />
Minimum value: `2`<br />

??? example
    ``` yaml
    spec:
      config:
        replication: 3
    ```

### config.retentionBytes
Configuration controls the maximum size a partition can grow to before we will discard old log segments to free up space if we are using the "delete" retention policy. By default there is no size limit only a time limit. Since this limit is enforced at the partition level, multiply it by the number of partitions to compute the topic retention in bytes.

Type: `integer`<br />
Required: `false`<br />
Default value: `-1`<br />

??? example
    ``` yaml
    spec:
      config:
        retentionBytes: -1
    ```

### config.retentionHours
The number of hours to keep a log file before deleting it.

Type: `integer`<br />
Required: `false`<br />
Default value: `168`<br />
Maximum value: `2562047788015`<br />

??? example
    ``` yaml
    spec:
      config:
        retentionHours: 168
    ```

### config.segmentHours
The number of hours after which Kafka will force the log to roll even if the segment file isn't full to ensure that retention can delete or compact old data.

Type: `integer`<br />
Required: `false`<br />
Default value: `168`<br />
Value range: `1`-`8760`<br />

??? example
    ``` yaml
    spec:
      config:
        segmentHours: 168
    ```

## pool
Type: `string`<br />
Required: `true`<br />

??? example
    ``` yaml
    spec:
      pool: nav-integration-test
    ```

